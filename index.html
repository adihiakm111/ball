<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Sensor Test</title>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:#000;
  color:#0f0;
  font-family:Arial;
}

#info{
  font-size:24px;
  margin-bottom:20px;
  text-align:center;
}

#track{
  width:90vw;
  height:80px;
  background:#333;
  border-radius:40px;
  position:relative;
  overflow:hidden;
}

#ball{
  width:60px;
  height:60px;
  border-radius:50%;
  background:cyan;
  position:absolute;
  top:10px;
  left:50%;
  transform:translateX(-50%);
}
</style>
</head>

<body>

<div id="info">SCREEN TAP KARO</div>

<div id="track">
  <div id="ball"></div>
</div>

<script>
const info = document.getElementById("info");
const ball = document.getElementById("ball");
const track = document.getElementById("track");

let started = false;
let tilt = 0;
let x = 0;
let vel = 0;

document.body.addEventListener("click", async ()=>{
  if(started) return;
  started = true;

  // iPhone permission
  if(
    typeof DeviceOrientationEvent !== "undefined" &&
    typeof DeviceOrientationEvent.requestPermission === "function"
  ){
    const res = await DeviceOrientationEvent.requestPermission();
    if(res !== "granted"){
      info.innerText = "Permission denied";
      return;
    }
  }

  info.innerText = "Phone jhukao (left / right)";
  x = (track.offsetWidth - ball.offsetWidth) / 2;
  loop();
});

// SENSOR (simple)
window.addEventListener("deviceorientation", e=>{
  if(!started) return;
  tilt = e.gamma || 0;   // left-right
  info.innerText = "gamma: " + Math.round(tilt);
});

function loop(){
  // simple physics
  vel += tilt * 0.05;
  vel *= 0.95;
  x += vel;

  // bounds
  if(x < 0) x = 0;
  if(x + ball.offsetWidth > track.offsetWidth){
    x = track.offsetWidth - ball.offsetWidth;
  }

  ball.style.left = x + "px";
  requestAnimationFrame(loop);
}
</script>

</body>
</html>
